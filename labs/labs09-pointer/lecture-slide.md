## Physical Computing

### ครั้งที่ 9: Pointers

**1. บทนำ**

ในภาษาซี เมื่อเราประกาศตัวแปร เช่น

```c
int x = 2;
```

จะมีกระบวนการเบื้องหลังเกิดขึ้นดังนี้

1. **จองเนื้อที่ใน RAM:** ระบบจะทำการจองพื้นที่ในหน่วยความจำ RAM สำหรับเก็บค่าของตัวแปร `x` ซึ่งเป็นตัวแปรชนิดจำนวนเต็ม
2. **กำหนดชื่อให้ตำแหน่ง:** ชื่อตัวแปร `x` จะถูกนำไปใช้เป็นชื่อของตำแหน่ง address ใน RAM ที่ถูกจองไว้
3. **เก็บค่าข้อมูล:** ค่าข้อมูล `2` จะถูกนำไปเก็บไว้ในตำแหน่ง address นั้น

**ตัวอย่าง:**

```
x คือ Location name
2 คือ Values at Location
0F45AB14 คือ Address number (Location Number)
```

**2. การแสดงตำแหน่ง address**

เราสามารถแสดงตำแหน่ง address ของตัวแปรได้โดยใช้เครื่องหมาย `&` นำหน้าชื่อตัวแปร

**ตัวอย่าง:**

```c
#include <stdio.h>

int main() {
    int a = 3;
    printf("Address of a = %d\n", &a); // แสดง address ในรูปเลขฐานสิบ
    printf("Address of a = %p\n", &a); // แสดง address ในรูปเลขฐานสิบหก
    return 0;
}
```

**3. การแสดงค่าของข้อมูลที่ address นั้น ๆ**

เราสามารถแสดงค่าของข้อมูลที่ address นั้น ๆ ได้โดยใช้เครื่องหมาย `*` นำหน้าชื่อตัวแปร pointer

**ตัวอย่าง:**

```c
#include <stdio.h>

int main() {
    int a = 3;
    int *ptr = &a;
    printf("Values of a = %d\n", *ptr); // แสดงค่าของข้อมูลที่ pointer ptr ชี้ไป
    return 0;
}
```

**4. การประกาศตัวแปร pointer**

การประกาศตัวแปร pointer ทำได้โดยระบุชนิดข้อมูล ตามด้วยเครื่องหมาย `*`  และชื่อตัวแปร

**ตัวอย่าง:**

```c
int *ptr; // ประกาศตัวแปร pointer ชื่อ ptr ชนิด int 
```

**5. รูปแบบการประกาศตัวแปร pointer**

```
type *pointer_name
```

* **type** คือ ชนิดข้อมูลของตัวแปรที่ pointer ชี้ไป
* **\*** คือ เครื่องหมายแสดงว่าเป็นตัวแปร pointer
* **pointer_name** คือ ชื่อของตัวแปร pointer

**6. Pointer ของ pointer (Nested pointer)**

Pointer สามารถเก็บ address ของ pointer ตัวอื่นได้เช่นกัน เรียกว่า nested pointer

**ตัวอย่าง:**

```c
#include <stdio.h>

int main() {
    int a = 3;
    int *b = &a;
    int **c = &b; 
    printf("Value of a = %d\n", **c); // แสดงค่าของ a ผ่าน pointer c
    return 0;
}
```

**7. การกระทำทางคณิตศาสตร์ของ Pointer**

* การบวก `+` คือ การเลื่อน address ไปยังตำแหน่งที่สูงขึ้น
* การลบ `-` คือ การเลื่อน address ไปยังตำแหน่งที่ต่ำลง

**8. ความสัมพันธ์ของ Pointer และ Array**

* เมื่อประกาศ Pointer ของ Array, Pointer จะชี้ไปที่ address ของ index แรกของ Array
* การบวกหรือลบค่า address ของ Pointer ทำให้สามารถเข้าถึงข้อมูลใน Array ได้

**9. การประยุกต์ใช้ pointer: Link list**

* Linked list คือ โครงสร้างข้อมูลที่ประกอบด้วย node หลายๆ node เชื่อมต่อกัน โดยแต่ละ node จะเก็บข้อมูลและ address ของ
  node ถัดไป
* Pointer ถูกใช้ในการชี้ไปยัง node ต่างๆ ใน linked list ทำให้สามารถเข้าถึงและจัดการข้อมูลได้อย่างมีประสิทธิภาพ

**แบบฝึกหัด**

1. เขียนโปรแกรมรับข้อมูลเลขทศนิยม 3 จำนวน แล้วสลับตำแหน่งโดยใช้ฟังก์ชั่นย่อยและ pointer
2. เขียนโปรแกรมตรวจสอบว่าข้อความที่รับเข้ามาเป็น palindrome หรือไม่ โดยใช้ pointer
3. เขียนโปรแกรมรับค่า แล้วแสดงผลแบบย้อนกลับโดยใช้ pointer