# 7-Segment Display with Arduino

## หน้าตาของอุปกรณ์ 7-segment

![LED 7-Segment](files/img/hardwarebro.png)

## ระบุตำแหน่งขาของ 7-segment

![Pin Layout](files/img/7seg_withleg.png)

## ระวัง Common Anode กับ Common Cathode

![8-dit-commonanode-commoncathode.jpg](files/img/8-dit-commonanode-commoncathode.jpg)

## ตัวอย่างการแสดงผลในรูปแบบตัวเลข

![LED 7-Segment](files/img/Seven-segment-display.png)

## การเชื่อมต่อ Pin กับ 7-segment

**ตัวอย่าง การกำหนดขาเชื่อมต่อ 7-segment display**:

- ขา A (ขา 7) → Digital Pin 2
- ขา B (ขา 6) → Digital Pin 3
- ขา C (ขา 4) → Digital Pin 4
- ขา D (ขา 2) → Digital Pin 5
- ขา E (ขา 1) → Digital Pin 6
- ขา F (ขา 9) → Digital Pin 7
- ขา G (ขา 10) → Digital Pin 8
- ขา Common (ขา 3) → GND (ถ้าเป็น Common Cathode) หรือ +5V (ถ้าเป็น Common Anode)

## โค้ดตัวอย่าง

```c++
// กำหนดขาเชื่อมต่อ 7-segment display
int A = 2, B = 3, C = 4, D = 5, E = 6, F = 7, G = 8; // กำหนดขา A-G
int port[7] = {A, B, C, D, E, F, G}; // อาเรย์เพื่อจัดเก็บหมายเลขขา

void setup() {
  Serial.begin(9600); // เริ่มการสื่อสารผ่าน Serial ที่ 9600 bps
  for (int i = 0; i < 7; i++) {
    pinMode(port[i], OUTPUT); // กำหนดขาทั้งหมดเป็น OUTPUT
  }
}

void loop() {
  // แสดงเลข 0 ถึง 5
  for (int num = 0; num <= 5; num++) {
    displayNumber(num); // เรียกใช้ฟังก์ชันเพื่อแสดงเลข
    delay(1000); // หน่วงเวลา 1 วินาทีก่อนแสดงเลขถัดไป
  }
}

// ฟังก์ชันสำหรับแสดงเลข 0 ถึง 5 บน 7-segment
void displayNumber(int num) {
  // ปิด segment ทั้งหมดก่อน
  for (int i = 0; i < 7; i++) {
    digitalWrite(port[i], LOW); // ปิดทุก segment
  }

  // ใช้ switch-case เพื่อตรวจสอบเลขที่ต้องการแสดง
  switch (num) {
    case 0:
      // แสดงเลข 0
      digitalWrite(A, HIGH);
      digitalWrite(B, HIGH);
      digitalWrite(C, HIGH);
      digitalWrite(D, HIGH);
      digitalWrite(E, HIGH);
      digitalWrite(F, HIGH);
      // G ปิด
      break;
    case 1:
      // แสดงเลข 1
      digitalWrite(B, HIGH);
      digitalWrite(C, HIGH);
      break;
    ...
  }
}
```

## วิธีการต่อ 7 Segment Display

มีวิธีที่ดีกว่านี้เพียงแค่ใช้ Array ในการเก็บ Pin ที่ต้องเปิดของตัวเลขแต่ละตัว

**Tinkercad:**
https://www.tinkercad.com/things/eMgolJBjfB4-arduino-7-segment-display-common-cathode?sharecode=obS0eusqqYM8q-2Yjtl2wpl8u_L5XufAHJziz3IJyjc
![ex04-Arduino7segmentdisplay.png](files/img/ex04-Arduino7segmentdisplay.png)

```cpp
int num_array[10][7] = {  { 1,1,1,1,1,1,0 },    // 0
                          { 0,1,1,0,0,0,0 },    // 1
                          { 1,1,0,1,1,0,1 },    // 2
                          { 1,1,1,1,0,0,1 },    // 3
                          { 0,1,1,0,0,1,1 },    // 4
                          { 1,0,1,1,0,1,1 },    // 5
                          { 1,0,1,1,1,1,1 },    // 6
                          { 1,1,1,0,0,0,0 },    // 7
                          { 1,1,1,1,1,1,1 },    // 8
                          { 1,1,1,0,0,1,1 }
                       };   // 9

// Define the pins for each segment of the 7-segment display
const int segment_a = 2; 
const int segment_b = 3; 
const int segment_c = 4;
const int segment_d = 5;
const int segment_e = 6;
const int segment_f = 7;
const int segment_g = 8;

void setup() { 
  // set pin modes for each segment
  pinMode(segment_a, OUTPUT);   
  pinMode(segment_b, OUTPUT);   
  pinMode(segment_c, OUTPUT);   
  pinMode(segment_d, OUTPUT);   
  pinMode(segment_e, OUTPUT);   
  pinMode(segment_f, OUTPUT);   
  pinMode(segment_g, OUTPUT);   
}

void loop() {
  // Loop through each digit (0-9)
  for (int digit = 0; digit < 10; digit++) {
    displayDigit(digit);
    delay(1000); // Wait for 1 second before displaying the next digit
  }
}

// Function to display a specific digit on the 7-segment display
void displayDigit(int digit) {
  // Set each segment according to the num_array for the given digit
  digitalWrite(segment_a, num_array[digit][0]);
  digitalWrite(segment_b, num_array[digit][1]);
  digitalWrite(segment_c, num_array[digit][2]);
  digitalWrite(segment_d, num_array[digit][3]);
  digitalWrite(segment_e, num_array[digit][4]);
  digitalWrite(segment_f, num_array[digit][5]);
  digitalWrite(segment_g, num_array[digit][6]);
}
```
